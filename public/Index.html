<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link id="logo" rel="icon" href="https://th.bing.com/th/id/OIP.Ivwk9ZcGz0tfgg76cZFBPAAAAA?w=400&h=400&rs=1&pid=ImgDetMain" type="imge/png">
    <link rel="stylesheet" href="StylesIndex.css"> 
    <title>Index</title>
</head>
<body>
 <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>
<script>
    const socket = io('http://localhost:3000', { transports: ['websocket'] });

// Enviar un mensaje al servidor
socket.emit('mensaje', 'Hola, servidor!');

// Escuchar eventos del servidor
socket.on('mensaje', (data) => {
  console.log('Mensaje del servidor:', data);
});
</script>

<div class="Menu">

    <h1>Bienvenidos</h1>
</div>
<nav>
    <ul class="MenuH" >
        <li>
            <a class="ListaM" href="Index.html">Inicio</a>
        </li>
        <li>
            <a class="ListaM" href="Acerca.html">Acerca de</a>
        </li>
        <li>
            <a class="ListaM" href="Contacto.html">Contacto</a>
        </li>
    </ul>
</nav>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<script>
    
    const server = socket; // server ahora está disponible globalmente
  

  
    socket.on('chat message', function(msg){
      $('#messages').append($('<li>').text(msg));
    });
  </script>




<div id="contenedorChat">
<div id="mensajesChat"></div>
<form id="formularioChat">

    <input type="text" id="message-input" placeholder="Escribe tu mensaje"> 
    <button onclick="MandarMensaje()" id="EnviarBoton">Enviar</button>
    <script src="/Index.js" ></script>

</div>
</div>
 <script>
    $('form').submit(function () {
        const mensaje = $('#message-input').val();
        if (mensaje) {
            MandarMensaje(mensaje);
            $('#message-input').val('');
        }
        return false;
    });

    socket.on('chat message', function (usuario, mensaje) {
        mostrarMensaje(usuario, mensaje);
    });

    function MandarMensaje(mensaje) {
        mostrarMensaje('Tú', mensaje);
        socket.emit('mensaje', mensaje);
    }

    function mostrarMensaje(usuario, mensaje) {
        $('#mensajesChat').append($('<p>').html(`<strong>${usuario}:</strong> ${mensaje}`));
    }
</script>

</body>
</html>